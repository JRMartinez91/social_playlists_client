(this.webpackJsonpsocial_playlists_client=this.webpackJsonpsocial_playlists_client||[]).push([[0],{24:function(t,e,a){t.exports=a(36)},29:function(t,e,a){},30:function(t,e,a){},36:function(t,e,a){"use strict";a.r(e);var n=a(0),l=a.n(n),s=a(21),r=a.n(s),i=(a(29),a(2)),c=a(3),o=a(1),u=a(5),h=a(4),p=(a(30),a(22)),m=a(6),d=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={recentPlaylists:[]},n}return Object(c.a)(a,[{key:"getPlaylists",value:function(){var t=this;fetch("https://share-a-mixtape.herokuapp.com/playlists/recent").then((function(t){return t.json()})).then((function(e){return t.setState({recentPlaylists:e})})).catch((function(t){return console.error(t)})),console.log("get Playlists")}},{key:"componentDidMount",value:function(){this.getPlaylists()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Home Page"),l.a.createElement("h2",null,"Recent Playlists:"),l.a.createElement("ol",null,this.state.recentPlaylists.map((function(t){return l.a.createElement("li",null,l.a.createElement("h3",null,l.a.createElement("a",{href:"/playlist/".concat(t.id)},t.title)),l.a.createElement("h4",null,l.a.createElement("a",{href:"/users/".concat(t.user.id)},"By ",t.user.username)))}))))}}]),a}(n.Component),y=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={playlist:{}},n.parseTracks=n.parseTracks.bind(Object(o.a)(n)),n.parseUser=n.parseUser.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"checkLogin",value:function(){var t=this;fetch("https://share-a-mixtape.herokuapp.com/users/session_id",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("mixtape_token"))}}).then((function(t){return t.json()})).then((function(e){e.id&&t.setState({login:!0,user:e})}))}},{key:"getPlaylist",value:function(){var t=this;fetch("https://share-a-mixtape.herokuapp.com/".concat(this.props.match.params.id)).then((function(t){return t.json()})).then((function(e){return t.setState({playlist:e})})).catch((function(t){return console.error(t)})),console.log("get playlist")}},{key:"componentDidMount",value:function(){this.getPlaylist(),this.checkLogin()}},{key:"parseUser",value:function(){var t=this.state.playlist.user,e=l.a.createElement("p",null,"Loading...");return t&&(e=l.a.createElement("h3",null,l.a.createElement("a",{href:"/users/".concat(t.id)},"By ",t.username))),e}},{key:"parseTracks",value:function(){var t=this.state.playlist.tracks,e=this.state.playlist.id,a=[];return t?t.length>0?t.map((function(t){a.push(l.a.createElement("a",{href:"/track/".concat(e,"/").concat(t.position)},l.a.createElement("li",{key:t.id},l.a.createElement("ul",null,l.a.createElement("li",null,t.title),l.a.createElement("li",null,t.artist)))))})):a=l.a.createElement("p",null,"Playlist has no tracks!"):a=l.a.createElement("p",null,"Loading track list..."),a}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Playlist By ID"),l.a.createElement("h2",null,this.state.playlist.title),l.a.createElement("h4",null,"Tags: ",this.state.playlist.tags),this.state.user&&this.state.user.id==this.state.playlist.user_id?l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{href:"/edit_playlist/".concat(this.state.playlist.id)},"Edit")):l.a.createElement(l.a.Fragment,null),this.parseUser(),l.a.createElement("ol",null,this.parseTracks()))}}]),a}(n.Component),g=a(12),f=a(8),k=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={title:"",tags:"",tracks:[{title0:"",artist0:"",url0:""}],boxes:0},n.getUser=n.getUser.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(o.a)(n)),n.incrementEntryBoxes=n.incrementEntryBoxes.bind(Object(o.a)(n)),n.decrementEntryBoxes=n.decrementEntryBoxes.bind(Object(o.a)(n)),n.handleTrackFormChange=n.handleTrackFormChange.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"getUser",value:function(){var t=this;fetch("https://share-a-mixtape.herokuapp.com/session_id",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("mixtape_token"))}}).then((function(t){return t.json()})).then((function(e){e.id&&t.setState({login:!0,user:e})}))}},{key:"componentDidMount",value:function(){this.getUser()}},{key:"handleChange",value:function(t){this.setState(Object(f.a)({},t.target.id,t.target.value))}},{key:"handleTrackFormChange",value:function(t,e){var a=this.state.tracks;a[t]=Object(g.a)(Object(g.a)({},a[t]),{},Object(f.a)({},e.target.id,e.target.value)),this.setState({tracks:a})}},{key:"handleSubmit",value:function(t){var e,a=this;t.preventDefault(),fetch("https://share-a-mixtape.herokuapp.com/playlists",{body:JSON.stringify({title:this.state.title,user_id:this.state.user.id}),method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return e=t.id,console.log("POST playlist: "+t.title),console.log(e),e})).then((function(t){console.log("attempting track post");for(var e=1,n=0;n<=a.state.boxes;n++)a.state.tracks[n]["title"+n]&&a.state.tracks[n]["url"+n]&&(console.log("loop: track post "+n),fetch("https://share-a-mixtape.herokuapp.com/tracks",{body:JSON.stringify({title:a.state.tracks[n]["title"+n],artist:a.state.tracks[n]["artist"+n],url:a.state.tracks[n]["url"+n],playlist_id:t,position:e}),method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return console.log(t)})).catch((function(t){return console.error(t)})),e+=1)})).catch((function(t){return console.error(t)}))}},{key:"incrementEntryBoxes",value:function(){var t;this.setState({boxes:this.state.boxes+1});var e=this.state.boxes+1,a=this.state.tracks;a.push((t={},Object(f.a)(t,"title"+e,""),Object(f.a)(t,"artist"+e,""),Object(f.a)(t,"url"+e,""),t)),this.setState({tracks:a})}},{key:"decrementEntryBoxes",value:function(){this.state.boxes>0&&(this.setState({boxes:this.state.boxes-1}),this.state.tracks.pop())}},{key:"renderEntryBox",value:function(){for(var t=this,e=[],a=function(a){var n=l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Track ",a+1),l.a.createElement("label",{htmlFor:"title"+a},"Title"),l.a.createElement("input",{type:"text",value:t.state.tracks[a]["title"+a],onChange:function(e){t.handleTrackFormChange(a,e)},id:"title"+a}),l.a.createElement("label",{htmlFor:"artist"+a},"Artist"),l.a.createElement("input",{type:"text",value:t.state.tracks[a]["artist"+a],onChange:function(e){t.handleTrackFormChange(a,e)},id:"artist"+a}),l.a.createElement("label",{htmlFor:"url"+a},"URL"),l.a.createElement("input",{type:"text",value:t.state.tracks[a]["url"+a],onChange:function(e){t.handleTrackFormChange(a,e)},id:"url"+a}));e.push(n)},n=0;n<=this.state.boxes;n++)a(n);return e}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Create Playlist"),this.state.login?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Entries with a blank Title or URL will be ignored!"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",{htmlFor:"title"},"Playlist Title"),l.a.createElement("input",{type:"text",onChange:this.handleChange,id:"title"}),l.a.createElement("label",{htmlFor:"tags"},"Tags:"),l.a.createElement("div",null,"(Separate tags with spaces)"),l.a.createElement("input",{type:"text",id:"tags",onChange:this.handleChange}),this.renderEntryBox(),l.a.createElement("input",{type:"submit"})),l.a.createElement("button",{onClick:this.incrementEntryBoxes},"Add Another Track"),l.a.createElement("button",{onClick:this.decrementEntryBoxes},"Remove Last Track")):l.a.createElement("p",null,"You must log in to create a playlist!"))}}]),a}(n.Component),E=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={playlist:{},title:"",tags:"",tracks:[],boxes:0,initialBoxes:0},n.handleTitleChange=n.handleTitleChange.bind(Object(o.a)(n)),n.handleTagChange=n.handleTagChange.bind(Object(o.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(o.a)(n)),n.handleDelete=n.handleDelete.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.incrementEntryBoxes=n.incrementEntryBoxes.bind(Object(o.a)(n)),n.decrementEntryBoxes=n.decrementEntryBoxes.bind(Object(o.a)(n)),n.handleTrackFormChange=n.handleTrackFormChange.bind(Object(o.a)(n)),n.addTracksToState=n.addTracksToState.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"getUser",value:function(){var t=this;fetch("https://share-a-mixtape.herokuapp.com/users/session_id",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("mixtape_token"))}}).then((function(t){return t.json()})).then((function(e){e.id&&t.setState({login:!0,user:e})}))}},{key:"getPlaylist",value:function(){var t=this;console.log("get playlist"),fetch("https://share-a-mixtape.herokuapp.com/playlists/".concat(this.props.match.params.id)).then((function(t){return t.json()})).then((function(e){t.setState({playlist:e,title:e.title,tags:e.tags,boxes:e.tracks.length-1,initialBoxes:e.tracks.length-1})})).catch((function(t){return console.error(t)}))}},{key:"componentDidMount",value:function(){this.getPlaylist(),this.getUser()}},{key:"handleChange",value:function(t){this.setState(Object(f.a)({},t.target.id,t.target.value))}},{key:"handleTitleChange",value:function(t){var e=this.state.playlist;e.title=t.target.value,this.setState({playlist:e})}},{key:"handleTagChange",value:function(t){var e=this.state.playlist;e.tags=t.target.value,this.setState({playlist:e})}},{key:"handleSubmit",value:function(t){var e=this;t.preventDefault();var a="";console.log(this.state.tags),fetch("https://share-a-mixtape.herokuapp.com/".concat(this.state.playlist.id),{body:JSON.stringify({title:this.state.playlist.title,user_id:this.state.playlist.user_id,tags:this.state.tags}),method:"PUT",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return a=t.id,console.log(t),console.log("UPDATE playlist: "+t.title),console.log("tags:",t.tags),console.log(a),a})).then((function(t){console.log("attempting track post");for(var a=1,n=0;n<=e.state.initialBoxes;n++)console.log("PUT: track",n+1,e.state.playlist.tracks[n].title),e.state.playlist.tracks[n].title&&e.state.playlist.tracks[n].url&&(fetch("https://share-a-mixtape.herokuapp.com/".concat(e.state.playlist.tracks[n].id),{body:JSON.stringify({title:e.state.playlist.tracks[n].title,artist:e.state.playlist.tracks[n].artist,url:e.state.playlist.tracks[n].url,playlist_id:e.state.playlist.id,position:a}),method:"PUT",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(t){return t.json()})).catch((function(t){return console.error(t)})),a+=1);for(var l=e.state.initialBoxes+1;l<=e.state.boxes;l++)e.state.tracks[l].title&&e.state.tracks[l].url&&(console.log("POST: track ",l+1,e.state.playlist.tracks[l].title),fetch("https://share-a-mixtape.herokuapp.com/tracks",{body:JSON.stringify({title:e.state.tracks[l].title,artist:e.state.tracks[l].artist,url:e.state.tracks[l].url,playlist_id:t,position:a}),method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(t){return t.json()})).catch((function(t){return console.error(t)})),a+=1)}))}},{key:"handleDelete",value:function(t,e){var a=prompt("Are you sure you want to delete ".concat(this.state.playlist.tracks[t].title,"? Y/N"));"y"!=a&&"Y"!=a||fetch("https://share-a-mixtape.herokuapp.com/".concat(this.state.playlist.tracks[t].id),{method:"DELETE"})}},{key:"handleTrackFormChange",value:function(t,e){var a=this.state.playlist.tracks,n=e.target.id;n=n.replace(/[0-9]/,""),a[t]=Object(g.a)(Object(g.a)({},a[t]),{},Object(f.a)({},n,e.target.value));var l=this.state.playlist;l=Object(g.a)(Object(g.a)({},l),{},{tracks:a}),this.setState({playlist:l})}},{key:"incrementEntryBoxes",value:function(){this.setState({boxes:this.state.boxes+1});var t=this.state.playlist.tracks;t.push({title:"",artist:"",url:""}),this.setState({tracks:t})}},{key:"decrementEntryBoxes",value:function(){this.state.boxes>this.state.initialBoxes&&(this.setState({boxes:this.state.boxes-1}),this.state.playlist.tracks.pop())}},{key:"addTracksToState",value:function(){if(this.state.playlist.tracks){var t=this.state.playlist;if(console.log(this.state.playlist),this.state.playlist.tracks.length!==this.state.tracks.length){var e;console.log("attempting addTrackstoState"),console.log("playlist found"),e=t.tracks.length,this.setState({boxes:e-1});for(var a=this.state.tracks,n=0;n<=e;n++){var l;a[n]=(l={},Object(f.a)(l,"title"+n,t.tracks[n].title),Object(f.a)(l,"artist"+n,t.tracks[n].artist),Object(f.a)(l,"url"+n,t.tracks[n].url),l)}this.setState({tracks:a})}}}},{key:"renderEntryBox",value:function(){var t=this,e=[];if(this.state.playlist.tracks&&this.state.playlist.tracks.length>0)for(var a=function(a){var n=l.a.createElement("fieldset",null,l.a.createElement("legend",null,"Track ",a+1),l.a.createElement("label",{htmlFor:"title"+a},"Title"),l.a.createElement("input",{type:"text",value:t.state.playlist.tracks[a].title,onChange:function(e){t.handleTrackFormChange(a,e)},id:"title"+a}),l.a.createElement("label",{htmlFor:"artist"+a},"Artist"),l.a.createElement("input",{type:"text",value:t.state.playlist.tracks[a].artist,onChange:function(e){t.handleTrackFormChange(a,e)},id:"artist"+a}),l.a.createElement("label",{htmlFor:"url"+a},"URL"),l.a.createElement("input",{type:"text",value:t.state.playlist.tracks[a].url,onChange:function(e){t.handleTrackFormChange(a,e)},id:"url"+a}),a<=t.state.initialBoxes?l.a.createElement("button",{onClick:function(e){t.handleDelete(a,e)}},"Delete ",a+1):"");e.push(n)},n=0;n<this.state.playlist.tracks.length;n++)a(n);return e}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Edit Playlist"),this.state.login&&this.state.user.id==this.state.playlist.user_id?l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",{htmlFor:"title"},"Playlist Title"),l.a.createElement("input",{type:"text",onChange:this.handleTitleChange,value:this.state.playlist.title,id:"title"}),l.a.createElement("label",{htmlFor:"tags"},"Tags:"),l.a.createElement("input",{type:"text",id:"tags",value:this.state.tags,onChange:this.handleChange}),l.a.createElement("div",null,"(Separate tags with spaces)"),this.renderEntryBox(),l.a.createElement("input",{type:"submit"})),l.a.createElement("button",{onClick:this.incrementEntryBoxes},"Add Track"),l.a.createElement("button",{onClick:this.decrementEntryBoxes},"Remove Last Track")):l.a.createElement("p",null,"You are not authorized to edit this playlist!"))}}]),a}(n.Component),b=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={user:{}},n.parsePlaylists=n.parsePlaylists.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"getUser",value:function(){var t=this;fetch("https://share-a-mixtape.herokuapp.com/users/".concat(this.props.match.params.id)).then((function(t){return t.json()})).then((function(e){return t.setState({user:e})})).catch((function(t){return console.error(t)}))}},{key:"checkLogin",value:function(){var t=this;fetch("https://share-a-mixtape.herokuapp.com/users/session_id",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("mixtape_token"))}}).then((function(t){return t.json()})).then((function(e){e.id&&t.setState({login:!0,session_id:e.id})}))}},{key:"handleDelete",value:function(t,e){if(this.state.login){var a=prompt("Are you sure you want to delete ".concat(e,"? Y/N"));"y"!=a&&"Y"!=a||fetch("https://share-a-mixtape.herokuapp.com/playlists/".concat(t),{method:"DELETE"})}}},{key:"componentDidMount",value:function(){this.getUser(),this.checkLogin()}},{key:"parsePlaylists",value:function(){var t=this,e=[];this.state.user.playlists?this.state.user.playlists.length>0?this.state.user.playlists.map((function(a){e.push(l.a.createElement("li",null,l.a.createElement("h3",null,l.a.createElement("a",{href:"/playlist/".concat(a.id)},a.title)),t.state.login&&t.state.session_id==a.user_id?l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{href:"/edit_playlist/".concat(a.id)},"Edit"),l.a.createElement("button",{onClick:function(){t.handleDelete(a.id,a.title)}},"Delete")):l.a.createElement(l.a.Fragment,null)))})):e=l.a.createElement("li",null,"No playlists created yet!"):e=l.a.createElement("li",null,"...");return e}},{key:"render",value:function(){var t=this.state.user;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Userpage"),l.a.createElement("h2",null,t.username),l.a.createElement("ul",null,this.parsePlaylists()))}}]),a}(n.Component),v=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={},n.parseForwardButton=n.parseForwardButton.bind(Object(o.a)(n)),n.parsePlaylistLink=n.parsePlaylistLink.bind(Object(o.a)(n)),n.parseBackButton=n.parseBackButton.bind(Object(o.a)(n)),n.parseTrackInfo=n.parseTrackInfo.bind(Object(o.a)(n)),n.displayVideo=n.displayVideo.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"displayVideo",value:function(){if(this.state.playlist){var t=this.state.playlist.tracks[this.props.match.params.track_position-1].url;return t=t.replace("watch?v=","embed/"),l.a.createElement("iframe",{width:"500",height:"300",src:t,title:"videoframe"})}}},{key:"getPlaylist",value:function(){var t=this;fetch("https://share-a-mixtape.herokuapp.com/playlists/".concat(this.props.match.params.playlist_id)).then((function(t){return t.json()})).then((function(e){return t.setState({playlist:e})})).catch((function(t){return console.error(t)}))}},{key:"componentDidMount",value:function(){this.getPlaylist(),setTimeout(console.log(this.state),5e3)}},{key:"parseTrackInfo",value:function(){if(this.state.playlist){var t=this.state.playlist.tracks[this.props.match.params.track_position-1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,t.title),l.a.createElement("h3",null,t.artist))}return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Loading..."))}},{key:"parsePlaylistLink",value:function(){return this.state.playlist?l.a.createElement("h3",null,l.a.createElement("a",{href:"/playlist/".concat(this.state.playlist.id)},"Back To Playlist: ",this.state.playlist.title)):l.a.createElement("h3",null,"Loading...")}},{key:"parseBackButton",value:function(){var t=this.props.match.params.playlist_id,e=this.props.match.params.track_position-1;return this.state.playlist?e<1?l.a.createElement("h3",null,"No Previous Track"):l.a.createElement("h3",null,l.a.createElement("a",{href:"/track/".concat(t,"/").concat(e)},"Previous Track")):l.a.createElement("h3",null,"Loading...")}},{key:"parseForwardButton",value:function(){var t=this.props.match.params.playlist_id,e=parseInt(this.props.match.params.track_position)+1;return this.state.playlist?(console.log(this.state.playlist.tracks.length),console.log(e),e>this.state.playlist.tracks.length?l.a.createElement("h3",null,"No Next Track"):l.a.createElement("h3",null,l.a.createElement("a",{href:"/track/".concat(t,"/").concat(e)},"Next Track"))):l.a.createElement("h3",null,"Loading...")}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Track by ID"),l.a.createElement("div",null,this.displayVideo()),l.a.createElement("div",null,this.parseBackButton(),l.a.createElement("div",null,this.parseTrackInfo()),this.parseForwardButton()),l.a.createElement("div",null,this.parsePlaylistLink()))}}]),a}(n.Component),j=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={playlists:{}},n.parsePlaylists=n.parsePlaylists.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"getPlaylists",value:function(){var t=this;fetch("https://share-a-mixtape.herokuapp.com/playlists/").then((function(t){return t.json()})).then((function(e){return t.setState({playlists:e})})).catch((function(t){return console.error(t)})),console.log("get playlist")}},{key:"componentDidMount",value:function(){this.getPlaylists()}},{key:"parsePlaylists",value:function(){if(this.state.playlists.length>0)return l.a.createElement(l.a.Fragment,null,this.state.playlists.map((function(t){return l.a.createElement("li",null,l.a.createElement("a",{href:"/playlist/".concat(t.id)},t.title),l.a.createElement("p",null,t.tags?t.tags:"No Tags"))})))}},{key:"render",value:function(){var t=this.state.playlists;return console.log(t),l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"All Playlists"),l.a.createElement("ol",null,this.parsePlaylists()))}}]),a}(n.Component),O=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={users:[]},n.parseUsers=n.parseUsers.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"getUsers",value:function(){var t=this;fetch("https://share-a-mixtape.herokuapp.com/users").then((function(t){return t.json()})).then((function(e){return t.setState({users:e})})).catch((function(t){return console.error(t)}))}},{key:"componentDidMount",value:function(){this.getUsers()}},{key:"parseUsers",value:function(){if(this.state.users.length>0)return l.a.createElement(l.a.Fragment,null,this.state.users.map((function(t){return l.a.createElement("li",null,l.a.createElement("h3",null,l.a.createElement("a",{href:"/users/".concat(t.id)},t.username)),t.playlists?l.a.createElement("p",null,t.playlists.length," Playlists"):l.a.createElement("h4",null,"No Playlists"))})))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"All Users"),l.a.createElement("ul",null,this.parseUsers()))}}]),a}(n.Component),x=a(18),C=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={playlists:[],alltags:[],searchterm:""},n.parseAllTags=n.parseAllTags.bind(Object(o.a)(n)),n.parsePlaylists=n.parsePlaylists.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleSubmit",value:function(t){t.preventDefault(),this.getPlaylists(this.state.searchterm)}},{key:"handleChange",value:function(t){this.setState(Object(f.a)({},t.target.id,t.target.value))}},{key:"getPlaylists",value:function(t){var e=this;fetch("https://share-a-mixtape.herokuapp.com/playlists/tagsearch/".concat(t)).then((function(t){return t.json()})).then((function(t){return e.setState({playlists:t})})).catch((function(t){return console.error(t)})),console.log("get playlist")}},{key:"getAllTags",value:function(){var t=this;fetch("https://share-a-mixtape.herokuapp.com/playlists/alltags").then((function(t){return t.json()})).then((function(e){return t.setState({alltags:e})})).catch((function(t){return console.error(t)}))}},{key:"componentDidMount",value:function(){this.getAllTags()}},{key:"search",value:function(t){this.getPlaylists(t)}},{key:"parseAllTags",value:function(){var t,e=this,a=[],n=Object(x.a)(this.state.alltags);try{for(n.s();!(t=n.n()).done;){var s=t.value;if(s.tags){var r,i=s.tags.split(" "),c=Object(x.a)(i);try{for(c.s();!(r=c.n()).done;){var o=r.value;a.includes(o)||a.push(o)}}catch(u){c.e(u)}finally{c.f()}}}}catch(u){n.e(u)}finally{n.f()}return l.a.createElement("div",null,a.map((function(t){return l.a.createElement("span",{onClick:function(){e.getPlaylists(t)}},t)})))}},{key:"parsePlaylists",value:function(){return l.a.createElement("div",null,this.state.playlists.map((function(t){return l.a.createElement("p",null,l.a.createElement("a",{href:"/playlist/".concat(t.id)},t.title))})))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Tag Search"),l.a.createElement("p",null,"Search box goes here"),l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",{htmlFor:"searchterm"},"Enter a tag to search for:"),l.a.createElement("input",{type:"text",id:"searchterm",onChange:this.handleChange}),l.a.createElement("input",{type:"submit",value:"Search"})),l.a.createElement("p",null,"List of all tags:"),this.parseAllTags(),l.a.createElement("p",null,"Search Results:"),this.parsePlaylists())}}]),a}(n.Component),T=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={},n.handleLogin=n.handleLogin.bind(Object(o.a)(n)),n.handleCreateUser=n.handleCreateUser.bind(Object(o.a)(n)),n.handleChange=n.handleChange.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleLogin",value:function(t){t.preventDefault(),fetch("https://share-a-mixtape.herokuapp.com/users/login",{body:JSON.stringify({user:{username:this.state.username,password:this.state.password}}),method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){localStorage.setItem("mixtape_token",t.token),console.log(t)}))}},{key:"handleCreateUser",value:function(t){t.preventDefault(),fetch("https://share-a-mixtape.herokuapp.com/users",{body:JSON.stringify({username:this.state.new_username,password:this.state.new_password}),method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){return console.log(t)})).catch((function(t){return console.error(t)}))}},{key:"handleChange",value:function(t){this.setState(Object(f.a)({},t.target.id,t.target.value))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Login"),l.a.createElement("h2",null,"Sign in:"),l.a.createElement("form",{onSubmit:this.handleLogin},l.a.createElement("label",{htmlFor:"username"},"Username:"),l.a.createElement("input",{type:"text",id:"username",onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"password"},"Password:"),l.a.createElement("input",{type:"text",id:"password",onChange:this.handleChange}),l.a.createElement("input",{type:"submit",value:"Log in"})),l.a.createElement("h2",null,"Or Create an Account:"),l.a.createElement("form",{onSubmit:this.handleCreateUser},l.a.createElement("label",{htmlFor:"new_username"},"Username:"),l.a.createElement("input",{type:"text",id:"new_username",onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"new_password"},"Password:"),l.a.createElement("input",{type:"text",id:"new_password",onChange:this.handleChange}),l.a.createElement("input",{type:"submit",value:"Create Account"})))}}]),a}(n.Component),S=function(t){Object(u.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).state={login:!1},n.parseLogin=n.parseLogin.bind(Object(o.a)(n)),n.parseUserpage=n.parseUserpage.bind(Object(o.a)(n)),n.forceLogout=n.forceLogout.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"getUser",value:function(){var t=this;fetch("http://localhost:3000/users/session_id",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("mixtape_token"))}}).then((function(t){return t.json()})).then((function(e){e.id&&t.setState({login:!0,user:e}),console.log(e)}))}},{key:"forceLogout",value:function(){localStorage.setItem("mixtape_token",""),this.forceUpdate()}},{key:"parseLogin",value:function(){return this.state.login?l.a.createElement("a",{href:"/home",onClick:this.forceLogout},"Log Out"):l.a.createElement("a",{href:"/login"},"Log In")}},{key:"parseUserpage",value:function(){return this.state.login?l.a.createElement("p",null,l.a.createElement("a",{href:"/users/".concat(this.state.user.id)},this.state.user.username)):l.a.createElement("p",null,"Not Signed in")}},{key:"componentDidMount",value:function(){this.getUser()}},{key:"render",value:function(){return l.a.createElement(p.a,null,l.a.createElement("h1",null,"Share a Mixtape!"),this.parseUserpage(),l.a.createElement("nav",null,l.a.createElement("a",{href:"/home"},"Home"),l.a.createElement("a",{href:"/new_playlist"},"Create New Playlist"),l.a.createElement("a",{href:"/all"},"All Playlists"),l.a.createElement("a",{href:"/allusers"},"All Users"),l.a.createElement("a",{href:"/tagsearch"},"Tag Search"),this.parseLogin()),l.a.createElement(m.c,null,l.a.createElement(m.a,{path:"/home",component:d}),l.a.createElement(m.a,{path:"/playlist/:id",component:y}),l.a.createElement(m.a,{path:"/new_playlist",component:k}),l.a.createElement(m.a,{path:"/edit_playlist/:id",component:E}),l.a.createElement(m.a,{path:"/users/:id",component:b}),l.a.createElement(m.a,{path:"/track/:playlist_id/:track_position",component:v}),l.a.createElement(m.a,{path:"/all",component:j}),l.a.createElement(m.a,{path:"/allusers",component:O}),l.a.createElement(m.a,{path:"/tagsearch",component:C}),l.a.createElement(m.a,{path:"/login",component:T})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.6da52e3d.chunk.js.map